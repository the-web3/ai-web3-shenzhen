# Event Prediction å‰ç«¯è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: 1.0.0
**æ—¥æœŸ**: 2026-01-25
**çŠ¶æ€**: Draft

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 äº§å“å®šä½
ä¸€ä¸ª **Vendorï¼ˆDappï¼‰éš”ç¦»** çš„é¢„æµ‹äº‹ä»¶äº¤æ˜“å¹³å°ï¼šç”¨æˆ·å¿…é¡»é€šè¿‡é‚€è¯·ç åŠ å…¥æŸä¸ª Dapp åï¼Œæ‰èƒ½åœ¨è¯¥ Dapp çš„ä½œç”¨åŸŸå†…å®Œæˆå……å€¼ã€äº¤æ˜“ã€æŒä»“æŸ¥çœ‹ä¸ç»“ç®—ã€‚

### 1.2 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯æ ˆ |
|------|--------|
| å‰ç«¯æ¡†æ¶ | Next.js 15 + React 19 + TypeScript |
| æ ·å¼ | Tailwind CSS + DaisyUI |
| çŠ¶æ€ç®¡ç† | Zustand (å®¢æˆ·ç«¯) + React Query (æœåŠ¡ç«¯) |
| Web3 | Wagmi + Viem + RainbowKit |
| æ•°æ®åº“ | Supabase (PostgreSQL) |
| åˆçº¦ | Event-Prediction (Foundry, æ‰‹åŠ¨å¤åˆ¶ ABI) |
| é“¾ | Local Hardhat (å¼€å‘é˜¶æ®µ) |

### 1.3 æ ¸å¿ƒè®¾è®¡å†³ç­–

| å†³ç­–ç‚¹ | æ–¹æ¡ˆ |
|--------|------|
| ç”¨æˆ·è®¤è¯ | é’±åŒ… + ç­¾åéªŒè¯ â†’ JWT Session |
| æ•°æ®åŒæ­¥ | é“¾ä¸Šä¸ºä¸»ï¼ŒDB ç¼“å­˜ |
| é‚€è¯·ç å­˜å‚¨ | æ˜æ–‡å­˜å‚¨ï¼ˆHackathon ç®€åŒ–ï¼‰ |
| äº¤æ˜“ç•Œé¢ | ç®€åŒ–å¸‚ä»·é£æ ¼ï¼ˆåªè¾“æ•°é‡ï¼‰ |
| æ•°æ®æ›´æ–° | è½®è¯¢ï¼ˆ5-10ç§’ï¼‰ |
| UI ç»„ä»¶ | DaisyUI |

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (Next.js 15)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pages                          â”‚  State Management          â”‚
â”‚  â”œâ”€â”€ /join?code=xxx            â”‚  â”œâ”€â”€ Zustand (å…¨å±€çŠ¶æ€)     â”‚
â”‚  â”œâ”€â”€ /home                     â”‚  â”‚   â”œâ”€â”€ activeVendor       â”‚
â”‚  â”œâ”€â”€ /event/[id]               â”‚  â”‚   â”œâ”€â”€ userSession        â”‚
â”‚  â”œâ”€â”€ /portfolio                â”‚  â”‚   â””â”€â”€ walletState        â”‚
â”‚  â”œâ”€â”€ /dapp                     â”‚  â””â”€â”€ React Query (æœåŠ¡ç«¯)   â”‚
â”‚  â””â”€â”€ /admin                    â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Routes (/api)              â”‚  Contract Hooks             â”‚
â”‚  â”œâ”€â”€ /auth/*                   â”‚  â”œâ”€â”€ useEventPod            â”‚
â”‚  â”œâ”€â”€ /vendors/*                â”‚  â”œâ”€â”€ useOrderBookPod        â”‚
â”‚  â”œâ”€â”€ /events/*                 â”‚  â”œâ”€â”€ useFundingPod          â”‚
â”‚  â”œâ”€â”€ /orders/*                 â”‚  â””â”€â”€ useFeeVaultPod         â”‚
â”‚  â””â”€â”€ /invite/*                 â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Supabase (PostgreSQL)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Smart Contracts (Local Hardhat)             â”‚
â”‚  PodFactory â†’ EventPod / OrderBookPod / FundingPod / FeeVaultâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµåŸåˆ™

1. **å†™æ“ä½œ**: Frontend â†’ åˆçº¦äº¤æ˜“ â†’ æˆåŠŸå â†’ åŒæ­¥åˆ° Supabase
2. **è¯»æ“ä½œ**: Frontend â†’ Supabase (å¿«é€Ÿ) â†’ å¿…è¦æ—¶é“¾ä¸ŠéªŒè¯
3. **å®æ—¶æ€§**: è½®è¯¢ + ç”¨æˆ·æ“ä½œåæ‰‹åŠ¨åˆ·æ–°

---

## 3. æ•°æ®åº“è®¾è®¡ (Supabase)

### 3.1 æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ============================================================
-- 1. vendors (Vendor ä¸»è¡¨ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE vendors (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL UNIQUE,
  vendor_name VARCHAR(128) NOT NULL,
  vendor_address VARCHAR(42) NOT NULL UNIQUE,
  fee_recipient VARCHAR(42) NOT NULL,
  is_active BOOLEAN DEFAULT true,

  -- Pod åœ°å€
  event_pod VARCHAR(42) NOT NULL,
  orderbook_pod VARCHAR(42) NOT NULL,
  funding_pod VARCHAR(42) NOT NULL,
  feevault_pod VARCHAR(42) NOT NULL,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_vendors_address ON vendors(vendor_address);
CREATE INDEX idx_vendors_active ON vendors(is_active);

-- ============================================================
-- 2. vendor_invite_codes (é‚€è¯·ç è¡¨ï¼Œçº¯ DB)
-- ============================================================
CREATE TABLE vendor_invite_codes (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),

  code VARCHAR(32) NOT NULL UNIQUE,
  status SMALLINT NOT NULL DEFAULT 1,  -- 1=Active, 0=Revoked, 2=Expired
  max_uses INT NOT NULL DEFAULT 0,     -- 0=æ— é™
  used_count INT NOT NULL DEFAULT 0,
  expires_at TIMESTAMPTZ,

  created_by VARCHAR(42) NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  revoked_at TIMESTAMPTZ
);

CREATE INDEX idx_invite_codes_vendor ON vendor_invite_codes(vendor_id);
CREATE INDEX idx_invite_codes_code ON vendor_invite_codes(code);
CREATE INDEX idx_invite_codes_status ON vendor_invite_codes(status);

-- ============================================================
-- 3. user_vendors (ç”¨æˆ·-Vendor å…³ç³»è¡¨ï¼Œçº¯ DB)
-- ============================================================
CREATE TABLE user_vendors (
  id BIGSERIAL PRIMARY KEY,
  user_address VARCHAR(42) NOT NULL,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),

  joined_at TIMESTAMPTZ DEFAULT NOW(),
  joined_via_invite_id BIGINT REFERENCES vendor_invite_codes(id),
  status SMALLINT NOT NULL DEFAULT 1,  -- 1=Active, 0=Disabled

  UNIQUE(user_address, vendor_id)
);

CREATE INDEX idx_user_vendors_user ON user_vendors(user_address);
CREATE INDEX idx_user_vendors_vendor ON user_vendors(vendor_id);

-- ============================================================
-- 4. events (äº‹ä»¶è¡¨ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE events (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),
  event_id BIGINT NOT NULL,

  title VARCHAR(255) NOT NULL,
  description TEXT,
  deadline TIMESTAMPTZ NOT NULL,
  settlement_time TIMESTAMPTZ NOT NULL,

  status SMALLINT NOT NULL,  -- 0=Created, 1=Active, 2=Settled, 3=Cancelled
  creator_address VARCHAR(42) NOT NULL,

  winning_outcome_index SMALLINT,
  outcome_count SMALLINT NOT NULL,
  outcomes JSONB NOT NULL,  -- [{index, name, description}]

  prize_pool NUMERIC(36, 18) DEFAULT 0,
  volume NUMERIC(36, 18) DEFAULT 0,

  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  settled_at TIMESTAMPTZ,

  UNIQUE(vendor_id, event_id)
);

CREATE INDEX idx_events_vendor_status ON events(vendor_id, status);
CREATE INDEX idx_events_vendor_deadline ON events(vendor_id, deadline);

-- ============================================================
-- 5. orders (è®¢å•è¡¨ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE orders (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),
  order_id BIGINT NOT NULL,
  user_address VARCHAR(42) NOT NULL,

  event_id BIGINT NOT NULL,
  outcome_index SMALLINT NOT NULL,
  side SMALLINT NOT NULL,  -- 0=Buy, 1=Sell

  price INT NOT NULL,  -- 1-10000 basis points
  amount NUMERIC(36, 18) NOT NULL,
  filled_amount NUMERIC(36, 18) DEFAULT 0,
  remaining_amount NUMERIC(36, 18) NOT NULL,

  status SMALLINT NOT NULL,  -- 0=Pending, 1=Partial, 2=Filled, 3=Cancelled
  token_address VARCHAR(42) NOT NULL,

  tx_hash VARCHAR(66),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),

  UNIQUE(vendor_id, order_id)
);

CREATE INDEX idx_orders_vendor_user ON orders(vendor_id, user_address);
CREATE INDEX idx_orders_vendor_event ON orders(vendor_id, event_id);
CREATE INDEX idx_orders_status ON orders(status);

-- ============================================================
-- 6. user_balances (ç”¨æˆ·ä½™é¢ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE user_balances (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),
  user_address VARCHAR(42) NOT NULL,
  token_address VARCHAR(42) NOT NULL,

  available_balance NUMERIC(36, 18) DEFAULT 0,
  locked_balance NUMERIC(36, 18) DEFAULT 0,

  updated_at TIMESTAMPTZ DEFAULT NOW(),

  UNIQUE(vendor_id, user_address, token_address)
);

CREATE INDEX idx_balances_vendor_user ON user_balances(vendor_id, user_address);

-- ============================================================
-- 7. positions (æŒä»“ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE positions (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),
  user_address VARCHAR(42) NOT NULL,
  event_id BIGINT NOT NULL,
  outcome_index SMALLINT NOT NULL,
  token_address VARCHAR(42) NOT NULL,

  amount NUMERIC(36, 18) NOT NULL,
  avg_cost NUMERIC(36, 18),

  updated_at TIMESTAMPTZ DEFAULT NOW(),

  UNIQUE(vendor_id, user_address, event_id, outcome_index, token_address)
);

CREATE INDEX idx_positions_vendor_user ON positions(vendor_id, user_address);
CREATE INDEX idx_positions_vendor_event ON positions(vendor_id, event_id);

-- ============================================================
-- 8. trades (æˆäº¤è®°å½•ï¼Œé“¾ä¸ŠåŒæ­¥)
-- ============================================================
CREATE TABLE trades (
  id BIGSERIAL PRIMARY KEY,
  vendor_id BIGINT NOT NULL REFERENCES vendors(vendor_id),

  buy_order_id BIGINT NOT NULL,
  sell_order_id BIGINT NOT NULL,
  event_id BIGINT NOT NULL,
  outcome_index SMALLINT NOT NULL,

  buyer_address VARCHAR(42) NOT NULL,
  seller_address VARCHAR(42) NOT NULL,

  price INT NOT NULL,
  amount NUMERIC(36, 18) NOT NULL,
  token_address VARCHAR(42) NOT NULL,

  tx_hash VARCHAR(66),
  traded_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_trades_vendor_event ON trades(vendor_id, event_id);
CREATE INDEX idx_trades_buyer ON trades(vendor_id, buyer_address);
CREATE INDEX idx_trades_seller ON trades(vendor_id, seller_address);

-- ============================================================
-- 9. vendor_applications (Dapp ç”³è¯·ï¼Œçº¯ DB)
-- ============================================================
CREATE TABLE vendor_applications (
  id BIGSERIAL PRIMARY KEY,
  applicant_address VARCHAR(42) NOT NULL,
  vendor_name VARCHAR(128) NOT NULL,
  description TEXT,

  status SMALLINT NOT NULL DEFAULT 0,  -- 0=Pending, 1=Approved, 2=Rejected
  reviewed_by VARCHAR(42),
  reviewed_at TIMESTAMPTZ,
  reject_reason TEXT,

  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_applications_status ON vendor_applications(status);
CREATE INDEX idx_applications_applicant ON vendor_applications(applicant_address);

-- ============================================================
-- 10. admin_users (å¹³å°ç®¡ç†å‘˜ï¼Œçº¯ DB)
-- ============================================================
CREATE TABLE admin_users (
  id BIGSERIAL PRIMARY KEY,
  admin_address VARCHAR(42) NOT NULL UNIQUE,
  role VARCHAR(32) NOT NULL DEFAULT 'admin',  -- admin, super_admin
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 3.2 Row Level Security (RLS) ç­–ç•¥

```sql
-- å¯ç”¨ RLS
ALTER TABLE vendors ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_vendors ENABLE ROW LEVEL SECURITY;
ALTER TABLE events ENABLE ROW LEVEL SECURITY;
ALTER TABLE orders ENABLE ROW LEVEL SECURITY;
ALTER TABLE user_balances ENABLE ROW LEVEL SECURITY;
ALTER TABLE positions ENABLE ROW LEVEL SECURITY;

-- ç¤ºä¾‹ç­–ç•¥ï¼šç”¨æˆ·åªèƒ½æŸ¥çœ‹å·²åŠ å…¥ vendor çš„æ•°æ®
CREATE POLICY "Users can view joined vendors" ON vendors
  FOR SELECT USING (
    vendor_id IN (
      SELECT vendor_id FROM user_vendors
      WHERE user_address = current_setting('app.user_address', true)
    )
  );
```

---

## 4. è®¤è¯ç³»ç»Ÿ

### 4.1 è®¤è¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·è®¤è¯æµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. è¿æ¥é’±åŒ…
   User â†’ RainbowKit Connect â†’ è·å– address

2. è¯·æ±‚ç­¾å
   Frontend â†’ ç”Ÿæˆ message:
   "Welcome to Event Prediction!\n\nSign this message to verify your wallet.\n\nNonce: {random}\nTimestamp: {iso_time}"

3. éªŒè¯ç­¾å
   POST /api/auth/verify
   Request: { address, signature, message }
   Backend:
   - verifyMessage(address, message, signature)
   - ç”Ÿæˆ JWT: { address, exp: 24h }
   Response: { token, expiresAt }

4. å»ºç«‹ä¼šè¯
   - å­˜å‚¨ token åˆ° localStorage
   - åç»­è¯·æ±‚æºå¸¦ Authorization: Bearer {token}

5. æ£€æŸ¥ Vendor å…³ç³»
   GET /api/user/vendors
   - æ— è®°å½• â†’ é‡å®šå‘ /join
   - æœ‰è®°å½• â†’ è®¾ç½® activeVendor
```

### 4.2 JWT Payload ç»“æ„

```typescript
interface JWTPayload {
  address: string;      // ç”¨æˆ·é’±åŒ…åœ°å€
  iat: number;          // ç­¾å‘æ—¶é—´
  exp: number;          // è¿‡æœŸæ—¶é—´ (24h)
}
```

### 4.3 Zustand Auth Store

```typescript
// stores/useAuthStore.ts
interface AuthState {
  // çŠ¶æ€
  address: string | null;
  token: string | null;
  isAuthenticated: boolean;
  activeVendorId: number | null;
  joinedVendors: Vendor[];

  // Actions
  login: (address: string, token: string) => void;
  logout: () => void;
  setActiveVendor: (vendorId: number) => void;
  setJoinedVendors: (vendors: Vendor[]) => void;

  // Computed
  isVendorOwner: (vendorId: number) => boolean;
  isAdmin: () => boolean;
}
```

---

## 5. é¡µé¢è®¾è®¡

### 5.1 è·¯ç”±ç»“æ„

```
/                        â†’ é‡å®šå‘é€»è¾‘
/join                    â†’ é‚€è¯·ç åŠ å…¥é¡µï¼ˆå…¬å¼€ï¼‰
/home                    â†’ äº‹ä»¶åˆ—è¡¨ï¼ˆéœ€ç™»å½•+å·²åŠ å…¥Vendorï¼‰
/event/[eventId]         â†’ äº‹ä»¶è¯¦æƒ…+äº¤æ˜“
/portfolio               â†’ ä¸ªäººä¸­å¿ƒ
  /portfolio/assets      â†’ èµ„äº§é¡µ
  /portfolio/history     â†’ äº¤æ˜“å†å²
/dapp                    â†’ Vendor ç®¡ç†ç«¯
  /dapp/events           â†’ äº‹ä»¶ç®¡ç†
  /dapp/invites          â†’ é‚€è¯·ç ç®¡ç†
  /dapp/fees             â†’ è´¹ç”¨æ± 
/admin                   â†’ å¹³å°ç®¡ç†ç«¯
  /admin/applications    â†’ ç”³è¯·å®¡æ ¸
```

### 5.2 é¡µé¢è¯¦ç»†è®¾è®¡

#### 5.2.1 `/join` - é‚€è¯·ç åŠ å…¥é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Event Prediction                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Join a Dapp                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Vendor Logo        Vendor Name              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [img]              Welcome to MyDapp!       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                    A prediction market...   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Invite Code: [ABC123    ] (ä» URL è‡ªåŠ¨å¡«å…¥)        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  Status: âœ… Valid                                   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ¦Š Connect Wallet                           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸš€ Join This Dapp                           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

çŠ¶æ€å¤„ç†:
- code æ— æ•ˆ: "é‚€è¯·ç æ— æ•ˆ"
- code å·²æ’¤é”€: "é‚€è¯·ç å·²å¤±æ•ˆ"
- code è¿‡æœŸ: "é‚€è¯·ç å·²è¿‡æœŸ"
- code ç”¨å°½: "é‚€è¯·ç å·²è¾¾ä½¿ç”¨ä¸Šé™"
- å·²åŠ å…¥: "ä½ å·²åŠ å…¥è¯¥ Dapp" + [è¿›å…¥é¦–é¡µ] æŒ‰é’®
```

#### 5.2.2 `/home` - äº‹ä»¶åˆ—è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  [Vendor: MyDapp â–¼]           [Portfolio] [0x12..ab]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Welcome to MyDapp                                          â”‚
â”‚  Your balance: 1,000.00 USDT                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Filter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [All] [Active] [Pending] [Settled]     ğŸ” Search     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Event Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸŸ¢ Active                           Deadline: 5 days â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ 2024 ç¾å›½å¤§é€‰è·èƒœè€…                                     â”‚  â”‚
â”‚  â”‚ Who will win the 2024 US Presidential Election?      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚ â”‚ Candidate A  â”‚  â”‚ Candidate B  â”‚                   â”‚  â”‚
â”‚  â”‚ â”‚ 60%          â”‚  â”‚ 40%          â”‚                   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Prize Pool: 10,000 USDT    Volume: 25,000 USDT       â”‚  â”‚
â”‚  â”‚                                         [Trade â†’]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Event Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸŸ¡ Pending                          Settlement: 2 daysâ”‚  â”‚
â”‚  â”‚ ...                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.3 `/event/[id]` - äº‹ä»¶è¯¦æƒ… + äº¤æ˜“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Back]  [Vendor: MyDapp]               [Portfolio] [0x..]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€ Event Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2024 ç¾å›½å¤§é€‰è·èƒœè€…                          ğŸŸ¢ Active â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Who will win the 2024 US Presidential Election?      â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Deadline: 2024-11-05 12:00 UTC (5 days left)         â”‚  â”‚
â”‚  â”‚ Settlement: 2024-11-06 00:00 UTC                     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚ Prize Pool: 10,000 USDT    Volume: 25,000 USDT       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Outcomes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Trade Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ Buy: Candidate A       â”‚  â”‚
â”‚  â”‚ â”‚ â—‹ Candidate A        â”‚ â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ â”‚   Price: 0.60 (60%)  â”‚ â”‚  â”‚ Your Balance: 1,000 USDTâ”‚ â”‚
â”‚  â”‚ â”‚   Your Pos: 100 Long â”‚ â”‚  â”‚ Your Position: 100 Longâ”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚                          â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ [Buy]  [Sell]      â”‚ â”‚  â”‚
â”‚  â”‚ â”‚ â—‹ Candidate B        â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”‚   Price: 0.40 (40%)  â”‚ â”‚  â”‚                        â”‚  â”‚
â”‚  â”‚ â”‚   Your Pos: 0        â”‚ â”‚  â”‚ Amount (USDT):         â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ [_______________] MAX  â”‚  â”‚
â”‚  â”‚                          â”‚  â”‚                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Est. Price: 0.60       â”‚  â”‚
â”‚                                â”‚ Est. Fee: 0.30 USDT    â”‚  â”‚
â”‚                                â”‚ Est. Shares: 166.67    â”‚  â”‚
â”‚                                â”‚                        â”‚  â”‚
â”‚                                â”‚ [Confirm Buy]          â”‚  â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ My Orders â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                           [Refresh]  â”‚  â”‚
â”‚  â”‚ Side â”‚ Outcome â”‚ Amount â”‚ Filled â”‚ Status  â”‚ Action  â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚ Buy  â”‚ A       â”‚ 100    â”‚ 60     â”‚ Partial â”‚ [Cancel]â”‚  â”‚
â”‚  â”‚ Buy  â”‚ A       â”‚ 50     â”‚ 50     â”‚ Filled  â”‚ -       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancelled äº‹ä»¶å±•ç¤º:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ è­¦å‘Š: è¯¥äº‹ä»¶å·²è¢«å–æ¶ˆ                                      â”‚
â”‚  å–æ¶ˆçš„äº‹ä»¶ä¸ä¼šé€€æ¬¾ã€ä¸ä¼šèµ”å¿ã€ä¸ä¼šç»“ç®—ã€‚                        â”‚
â”‚  ä½ åœ¨è¯¥äº‹ä»¶ä¸­çš„æŒä»“å°†æ— æ³•å…‘æ¢ã€‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.4 `/portfolio` - ä¸ªäººä¸­å¿ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  [Vendor: MyDapp â–¼]               [Portfolio] [0x..]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  My Portfolio                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [Assets]  [Positions]  [History]                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Assets Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Available Balance          Locked Balance            â”‚  â”‚
â”‚  â”‚  1,000.00 USDT             250.00 USDT               â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  [Deposit]  [Withdraw]                               â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Deposit Modal:                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ Amount: [________] USDT                     â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Wallet Balance: 5,000 USDT                  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ [Approve] â†’ [Deposit]                       â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Positions Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Event           â”‚ Outcome â”‚ Amount â”‚ Avg Cost â”‚ PnL  â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚  2024 å¤§é€‰        â”‚ A       â”‚ 100    â”‚ 0.55     â”‚ +5%  â”‚  â”‚
â”‚  â”‚  BTC ä»·æ ¼é¢„æµ‹     â”‚ >100k   â”‚ 50     â”‚ 0.30     â”‚ +20% â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ History Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  Time       â”‚ Type  â”‚ Event â”‚ Amount â”‚ Price â”‚ TxHashâ”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ â”‚  â”‚
â”‚  â”‚  2024-01-20 â”‚ Buy   â”‚ A     â”‚ 50     â”‚ 0.60  â”‚ 0x... â”‚  â”‚
â”‚  â”‚  2024-01-19 â”‚ Sell  â”‚ B     â”‚ 30     â”‚ 0.42  â”‚ 0x... â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.5 `/dapp` - Vendor ç®¡ç†ç«¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  [â† Back to Home]                    [Vendor: MyDapp]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Sidebar       â”‚  Main Content                              â”‚
â”‚                â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€ Events Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“‹ Events â”‚  â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚ ğŸŸï¸ Invitesâ”‚  â”‚  â”‚ [+ Create Event]                    â”‚  â”‚
â”‚  â”‚ ğŸ’° Fees   â”‚  â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚ âš™ï¸ Settingsâ”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ 2024 å¤§é€‰               ğŸŸ¢ Active â”‚ â”‚  â”‚
â”‚                â”‚  â”‚ â”‚ Deadline: 2024-11-05              â”‚ â”‚  â”‚
â”‚                â”‚  â”‚ â”‚ Pool: 10,000  Volume: 25,000      â”‚ â”‚  â”‚
â”‚                â”‚  â”‚ â”‚              [View] [Cancel]      â”‚ â”‚  â”‚
â”‚                â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â”‚                                            â”‚
â”‚                â”‚  Create Event Modal:                       â”‚
â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                â”‚  â”‚ Title: [____________________]       â”‚  â”‚
â”‚                â”‚  â”‚ Description: [______________]      â”‚  â”‚
â”‚                â”‚  â”‚ Deadline: [____] Settlement: [____]â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Outcomes:                           â”‚  â”‚
â”‚                â”‚  â”‚ 1. [Option A    ] [+ Add]           â”‚  â”‚
â”‚                â”‚  â”‚ 2. [Option B    ] [Remove]          â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ [Create Event]                      â”‚  â”‚
â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                â”‚  â”Œâ”€ Invites Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ [+ Generate Invite Code]            â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Code   â”‚ Status â”‚ Used â”‚ Expires â”‚ Actâ”‚  â”‚
â”‚                â”‚  â”‚ ABC123 â”‚ Active â”‚ 5/âˆ  â”‚ Never   â”‚[R] â”‚  â”‚
â”‚                â”‚  â”‚ XYZ789 â”‚ Revokedâ”‚ 3/10 â”‚ -       â”‚ -  â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Generate Modal:                     â”‚  â”‚
â”‚                â”‚  â”‚ Max Uses: [0] (0=unlimited)         â”‚  â”‚
â”‚                â”‚  â”‚ Expires: [Optional date]            â”‚  â”‚
â”‚                â”‚  â”‚ [Generate]                          â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ âœ… Generated: ABC123                â”‚  â”‚
â”‚                â”‚  â”‚ Link: https://app.com/join?code=ABC123â”‚ â”‚
â”‚                â”‚  â”‚ [Copy Link]                         â”‚  â”‚
â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                â”‚  â”Œâ”€ Fees Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Pending Fees:  150.00 USDT          â”‚  â”‚
â”‚                â”‚  â”‚ [Push to Available]                 â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Available:     500.00 USDT          â”‚  â”‚
â”‚                â”‚  â”‚ [Withdraw]                          â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â”‚ Withdrawal History:                 â”‚  â”‚
â”‚                â”‚  â”‚ 2024-01-15 â”‚ 200 USDT â”‚ 0x1234...   â”‚  â”‚
â”‚                â”‚  â”‚ 2024-01-10 â”‚ 100 USDT â”‚ 0x5678...   â”‚  â”‚
â”‚                â”‚  â”‚                                     â”‚  â”‚
â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2.6 `/admin` - å¹³å°ç®¡ç†ç«¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Admin Panel                              [0x12..ab]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Vendor Applications                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [Pending: 3]  [Approved]  [Rejected]                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Application #12                         ğŸŸ¡ Pending   â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ Applicant: 0x1234...abcd                           â”‚   â”‚
â”‚  â”‚ Vendor Name: CryptoPredict                         â”‚   â”‚
â”‚  â”‚ Description: A prediction market for crypto...     â”‚   â”‚
â”‚  â”‚ Applied: 2024-01-20 14:30                          â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ [Approve] [Reject]                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Reject Modal:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Reason for rejection:                               â”‚   â”‚
â”‚  â”‚ [________________________________]                  â”‚   â”‚
â”‚  â”‚ [Confirm Reject]                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. API è®¾è®¡

### 6.1 API è·¯ç”±ç»“æ„

```
/api
â”œâ”€â”€ /auth
â”‚   â”œâ”€â”€ POST /verify          # éªŒè¯ç­¾åï¼Œè¿”å› JWT
â”‚   â””â”€â”€ GET  /me              # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
â”‚
â”œâ”€â”€ /vendors
â”‚   â”œâ”€â”€ GET  /                # è·å–ç”¨æˆ·å·²åŠ å…¥çš„ vendors
â”‚   â”œâ”€â”€ GET  /:id             # è·å– vendor è¯¦æƒ…
â”‚   â””â”€â”€ POST /sync            # ä»é“¾ä¸ŠåŒæ­¥ vendor æ•°æ®
â”‚
â”œâ”€â”€ /invite
â”‚   â”œâ”€â”€ GET  /validate        # éªŒè¯é‚€è¯·ç  ?code=xxx
â”‚   â”œâ”€â”€ POST /join            # ä½¿ç”¨é‚€è¯·ç åŠ å…¥
â”‚   â”œâ”€â”€ POST /generate        # [Vendor] ç”Ÿæˆé‚€è¯·ç 
â”‚   â””â”€â”€ POST /revoke          # [Vendor] æ’¤é”€é‚€è¯·ç 
â”‚
â”œâ”€â”€ /events
â”‚   â”œâ”€â”€ GET  /                # è·å–äº‹ä»¶åˆ—è¡¨ ?vendor_id=&status=
â”‚   â”œâ”€â”€ GET  /:id             # è·å–äº‹ä»¶è¯¦æƒ…
â”‚   â”œâ”€â”€ POST /                # [Vendor] åˆ›å»ºäº‹ä»¶
â”‚   â”œâ”€â”€ POST /:id/sync        # ä»é“¾ä¸ŠåŒæ­¥äº‹ä»¶æ•°æ®
â”‚   â””â”€â”€ POST /:id/cancel      # [Vendor] å–æ¶ˆäº‹ä»¶
â”‚
â”œâ”€â”€ /orders
â”‚   â”œâ”€â”€ GET  /                # è·å–ç”¨æˆ·è®¢å• ?vendor_id=&event_id=
â”‚   â”œâ”€â”€ GET  /:id             # è·å–è®¢å•è¯¦æƒ…
â”‚   â””â”€â”€ POST /sync            # ä»é“¾ä¸ŠåŒæ­¥è®¢å•æ•°æ®
â”‚
â”œâ”€â”€ /balances
â”‚   â”œâ”€â”€ GET  /                # è·å–ç”¨æˆ·ä½™é¢ ?vendor_id=
â”‚   â””â”€â”€ POST /sync            # ä»é“¾ä¸ŠåŒæ­¥ä½™é¢
â”‚
â”œâ”€â”€ /positions
â”‚   â”œâ”€â”€ GET  /                # è·å–ç”¨æˆ·æŒä»“ ?vendor_id=&event_id=
â”‚   â””â”€â”€ POST /sync            # ä»é“¾ä¸ŠåŒæ­¥æŒä»“
â”‚
â”œâ”€â”€ /applications            # [Admin]
â”‚   â”œâ”€â”€ GET  /                # è·å–ç”³è¯·åˆ—è¡¨ ?status=
â”‚   â”œâ”€â”€ POST /                # æäº¤ç”³è¯·
â”‚   â”œâ”€â”€ POST /:id/approve     # æ‰¹å‡†ç”³è¯·
â”‚   â””â”€â”€ POST /:id/reject      # æ‹’ç»ç”³è¯·
â”‚
â””â”€â”€ /admin
    â””â”€â”€ GET  /check           # æ£€æŸ¥æ˜¯å¦ä¸ºç®¡ç†å‘˜
```

### 6.2 æ ¸å¿ƒ API è¯¦ç»†è®¾è®¡

#### POST /api/auth/verify

```typescript
// Request
{
  address: string;      // é’±åŒ…åœ°å€
  message: string;      // ç­¾åçš„æ¶ˆæ¯
  signature: string;    // ç­¾åç»“æœ
}

// Response 200
{
  token: string;        // JWT token
  expiresAt: number;    // è¿‡æœŸæ—¶é—´æˆ³
}

// Response 401
{
  error: "INVALID_SIGNATURE" | "SIGNATURE_EXPIRED"
}
```

#### GET /api/invite/validate

```typescript
// Request
GET /api/invite/validate?code=ABC123

// Response 200
{
  valid: true;
  vendor: {
    vendor_id: number;
    vendor_name: string;
    // logo, description if available
  };
  alreadyJoined: boolean;  // æ˜¯å¦å·²åŠ å…¥
}

// Response 400
{
  valid: false;
  error: "INVALID_CODE" | "CODE_REVOKED" | "CODE_EXPIRED" | "CODE_EXHAUSTED"
}
```

#### POST /api/invite/join

```typescript
// Request
{
  code: string;
}

// Response 200
{
  success: true;
  vendor: Vendor;
}

// Response 400
{
  error: "INVALID_CODE" | "ALREADY_JOINED" | ...
}
```

#### POST /api/events (Vendor Only)

```typescript
// Request
{
  vendor_id: number;
  title: string;
  description: string;
  deadline: string;        // ISO timestamp
  settlement_time: string;
  outcomes: {
    name: string;
    description?: string;
  }[];
  tx_hash: string;         // é“¾ä¸Šåˆ›å»ºäº‹ä»¶çš„äº¤æ˜“ hash
  event_id: number;        // é“¾ä¸Šè¿”å›çš„ event_id
}

// Response 201
{
  id: number;
  event_id: number;
  // ... full event object
}
```

---

## 7. åˆçº¦é›†æˆ

### 7.1 ABI æ–‡ä»¶ç»“æ„

```
packages/nextjs/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ abis/
â”‚   â”‚   â”œâ”€â”€ PodFactory.json
â”‚   â”‚   â”œâ”€â”€ EventPod.json
â”‚   â”‚   â”œâ”€â”€ OrderBookPod.json
â”‚   â”‚   â”œâ”€â”€ FundingPod.json
â”‚   â”‚   â””â”€â”€ FeeVaultPod.json
â”‚   â”œâ”€â”€ addresses.ts       # åˆçº¦åœ°å€é…ç½®
â”‚   â””â”€â”€ index.ts           # å¯¼å‡º
```

### 7.2 åˆçº¦åœ°å€é…ç½®

```typescript
// contracts/addresses.ts
export const CONTRACT_ADDRESSES = {
  // Local Hardhat
  31337: {
    podFactory: "0x...",
    // å…¶ä»–å…¨å±€åˆçº¦
  },
  // Sepolia (æœªæ¥)
  11155111: {
    podFactory: "0x...",
  }
} as const;
```

### 7.3 Wagmi Hooks å°è£…

```typescript
// hooks/contracts/usePodFactory.ts
export function usePodFactory() {
  const { data: vendorInfo } = useReadContract({
    address: CONTRACT_ADDRESSES[chainId].podFactory,
    abi: PodFactoryAbi,
    functionName: 'getVendorInfo',
    args: [vendorId],
  });

  return { vendorInfo };
}

// hooks/contracts/useEventPod.ts
export function useEventPod(eventPodAddress: Address) {
  // Read: getEvent, getEventStatus
  const { data: event } = useReadContract({
    address: eventPodAddress,
    abi: EventPodAbi,
    functionName: 'getEvent',
    args: [eventId],
  });

  // Write: createEvent
  const { writeContract: createEvent } = useWriteContract();

  return { event, createEvent };
}

// hooks/contracts/useOrderBookPod.ts
export function useOrderBookPod(orderBookPodAddress: Address) {
  // Read: getBestBid, getBestAsk, getOrder, getPosition
  // Write: placeOrder, cancelOrder
}

// hooks/contracts/useFundingPod.ts
export function useFundingPod(fundingPodAddress: Address) {
  // Read: getUserBalance, getLongPosition
  // Write: deposit, withdraw, mintCompleteSet, burnCompleteSet
}

// hooks/contracts/useFeeVaultPod.ts
export function useFeeVaultPod(feeVaultPodAddress: Address) {
  // Read: getFeeBalance, calculateFee
  // Write: withdrawFee
}
```

### 7.4 äº¤æ˜“æµç¨‹ç¤ºä¾‹

```typescript
// ä¸‹å•æµç¨‹
async function handlePlaceOrder() {
  // 1. è°ƒç”¨åˆçº¦
  const tx = await placeOrder({
    address: orderBookPodAddress,
    abi: OrderBookPodAbi,
    functionName: 'placeOrder',
    args: [eventId, outcomeIndex, side, price, amount, tokenAddress],
  });

  // 2. ç­‰å¾…äº¤æ˜“ç¡®è®¤
  const receipt = await waitForTransaction({ hash: tx });

  // 3. è§£æäº‹ä»¶è·å– orderId
  const orderId = parseOrderPlacedEvent(receipt.logs);

  // 4. åŒæ­¥åˆ°æ•°æ®åº“
  await fetch('/api/orders/sync', {
    method: 'POST',
    body: JSON.stringify({
      vendor_id: activeVendorId,
      order_id: orderId,
      tx_hash: tx,
    }),
  });

  // 5. åˆ·æ–° UI
  queryClient.invalidateQueries(['orders']);
}
```

---

## 8. é¡¹ç›®æ–‡ä»¶ç»“æ„

```
packages/nextjs/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx                 # Root layout
â”‚   â”œâ”€â”€ page.tsx                   # / â†’ é‡å®šå‘é€»è¾‘
â”‚   â”œâ”€â”€ join/
â”‚   â”‚   â””â”€â”€ page.tsx               # /join
â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â””â”€â”€ page.tsx               # /home
â”‚   â”œâ”€â”€ event/
â”‚   â”‚   â””â”€â”€ [eventId]/
â”‚   â”‚       â””â”€â”€ page.tsx           # /event/[eventId]
â”‚   â”œâ”€â”€ portfolio/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # /portfolio (é»˜è®¤ assets)
â”‚   â”‚   â””â”€â”€ layout.tsx             # Portfolio layout with tabs
â”‚   â”œâ”€â”€ dapp/
â”‚   â”‚   â”œâ”€â”€ page.tsx               # /dapp (é»˜è®¤ events)
â”‚   â”‚   â””â”€â”€ layout.tsx             # Dapp layout with sidebar
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ page.tsx               # /admin
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ verify/route.ts
â”‚       â”‚   â””â”€â”€ me/route.ts
â”‚       â”œâ”€â”€ vendors/
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â”œâ”€â”€ invite/
â”‚       â”‚   â”œâ”€â”€ validate/route.ts
â”‚       â”‚   â”œâ”€â”€ join/route.ts
â”‚       â”‚   â”œâ”€â”€ generate/route.ts
â”‚       â”‚   â””â”€â”€ revoke/route.ts
â”‚       â”œâ”€â”€ events/
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â”œâ”€â”€ orders/
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â”œâ”€â”€ balances/
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â”œâ”€â”€ positions/
â”‚       â”‚   â””â”€â”€ route.ts
â”‚       â””â”€â”€ applications/
â”‚           â””â”€â”€ route.ts
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ VendorSwitcher.tsx
â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ ConnectButton.tsx
â”‚   â”‚   â”œâ”€â”€ SignInButton.tsx
â”‚   â”‚   â””â”€â”€ AuthGuard.tsx
â”‚   â”œâ”€â”€ events/
â”‚   â”‚   â”œâ”€â”€ EventCard.tsx
â”‚   â”‚   â”œâ”€â”€ EventList.tsx
â”‚   â”‚   â”œâ”€â”€ EventDetail.tsx
â”‚   â”‚   â””â”€â”€ OutcomeCard.tsx
â”‚   â”œâ”€â”€ trading/
â”‚   â”‚   â”œâ”€â”€ TradePanel.tsx
â”‚   â”‚   â”œâ”€â”€ OrderList.tsx
â”‚   â”‚   â””â”€â”€ PositionList.tsx
â”‚   â”œâ”€â”€ portfolio/
â”‚   â”‚   â”œâ”€â”€ BalanceCard.tsx
â”‚   â”‚   â”œâ”€â”€ DepositModal.tsx
â”‚   â”‚   â””â”€â”€ WithdrawModal.tsx
â”‚   â”œâ”€â”€ dapp/
â”‚   â”‚   â”œâ”€â”€ EventManager.tsx
â”‚   â”‚   â”œâ”€â”€ CreateEventModal.tsx
â”‚   â”‚   â”œâ”€â”€ InviteManager.tsx
â”‚   â”‚   â””â”€â”€ FeeManager.tsx
â”‚   â””â”€â”€ admin/
â”‚       â””â”€â”€ ApplicationList.tsx
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ usePodFactory.ts
â”‚   â”‚   â”œâ”€â”€ useEventPod.ts
â”‚   â”‚   â”œâ”€â”€ useOrderBookPod.ts
â”‚   â”‚   â”œâ”€â”€ useFundingPod.ts
â”‚   â”‚   â””â”€â”€ useFeeVaultPod.ts
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useVendor.ts
â”‚   â””â”€â”€ usePolling.ts
â”‚
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ useAuthStore.ts
â”‚   â””â”€â”€ useVendorStore.ts
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts              # Browser client
â”‚   â”‚   â”œâ”€â”€ server.ts              # Server client
â”‚   â”‚   â””â”€â”€ types.ts               # Database types
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ jwt.ts
â”‚   â”‚   â””â”€â”€ verify.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ format.ts
â”‚       â””â”€â”€ constants.ts
â”‚
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ abis/
â”‚   â”‚   â”œâ”€â”€ PodFactory.json
â”‚   â”‚   â”œâ”€â”€ EventPod.json
â”‚   â”‚   â”œâ”€â”€ OrderBookPod.json
â”‚   â”‚   â”œâ”€â”€ FundingPod.json
â”‚   â”‚   â””â”€â”€ FeeVaultPod.json
â”‚   â”œâ”€â”€ addresses.ts
â”‚   â””â”€â”€ index.ts
â”‚
â””â”€â”€ types/
    â”œâ”€â”€ vendor.ts
    â”œâ”€â”€ event.ts
    â”œâ”€â”€ order.ts
    â””â”€â”€ user.ts
```

---

## 9. ç¯å¢ƒé…ç½®

### 9.1 ç¯å¢ƒå˜é‡

```bash
# .env.local

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# JWT Secret (for custom auth)
JWT_SECRET=your-super-secret-key-at-least-32-chars

# Web3
NEXT_PUBLIC_ALCHEMY_API_KEY=xxx
NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID=xxx

# Chain Config
NEXT_PUBLIC_TARGET_CHAIN_ID=31337  # Local Hardhat

# Contract Addresses (Local)
NEXT_PUBLIC_POD_FACTORY_ADDRESS=0x...
```

### 9.2 Supabase å®¢æˆ·ç«¯é…ç½®

```typescript
// lib/supabase/client.ts
import { createBrowserClient } from '@supabase/ssr';

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );
}

// lib/supabase/server.ts
import { createServerClient } from '@supabase/ssr';
import { cookies } from 'next/headers';

export async function createServerSupabaseClient() {
  const cookieStore = await cookies();

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll();
        },
        setAll(cookiesToSet) {
          cookiesToSet.forEach(({ name, value, options }) => {
            cookieStore.set(name, value, options);
          });
        },
      },
    }
  );
}
```

---

## 10. å®ç°çŠ¶æ€ä¸å¯¹é½è®¡åˆ’

è¯´æ˜: [x] = å·²å®ç°, [ ] = å¾…å®Œæˆ, [~] = éƒ¨åˆ†å®ç°(éœ€å¯¹é½ PRD)

### 10.1 å·²å®ç°(ä»“åº“å†…å¯è§)

- [x] Supabase client/server é…ç½® (`packages/nextjs/lib/supabase/*`)
- [x] è®¤è¯ç³»ç»Ÿ (/api/auth/*, `packages/nextjs/hooks/useAuth.ts`)
- [x] Zustand auth store (`packages/nextjs/stores/useAuthStore.ts`)
- [x] /join é¡µé¢ + /api/invite/* API
- [x] VendorSwitcher ç»„ä»¶
- [x] /home, /event/[id], /portfolio, /dapp, /admin é¡µé¢
- [x] /api/events*, /api/orders*, /api/portfolio, /api/admin/* åŸºç¡€æ¥å£
- [x] åˆçº¦ hooks (useEventPod/useOrderBookPod/useFundingPod/useFeeVaultPod)

### 10.2 éœ€è¦å¯¹é½ PRD çš„éƒ¨åˆ†

- [ ] API ç»Ÿä¸€æ ¡éªŒ (user_address + vendor_id) è¦†ç›– /api/events*, /api/portfolio, /api/orders ç­‰
- [ ] /dapp ç›¸å…³è¯·æ±‚ç»Ÿä¸€æºå¸¦ Authorization (events/invite-codes/generate/revoke/settle)
- [ ] /event/[id] å¢åŠ "æˆ‘çš„æŒä»“"æ¨¡å—
- [ ] äº¤æ˜“é¢æ¿å±•ç¤ºé¢„ä¼°æ‰‹ç»­è´¹
- [ ] ç§»é™¤æ’¤å•åŠŸèƒ½ (UI + /api/orders/[orderId] DELETE)
- [ ] çŠ¶æ€å®šä¹‰/æ–‡æ¡ˆå¯¹é½ PRD (event status, invite status)
- [ ] /dapp è´¹ç”¨æ± ç®¡ç† UI (pending_fee/pushed_fee/withdraw)
- [ ] Vendor åˆ‡æ¢ toast æç¤º
- [ ] é‚€è¯·ç  hash + depleted çŠ¶æ€ (PRD å»ºè®®, å¯é€‰)
- [ ] é¡µé¢çº§è®¿é—®æ§åˆ¶ç»Ÿä¸€ (AuthGuard æˆ–ç»Ÿä¸€é‡å®šå‘è§„åˆ™)

### 10.3 å¤–éƒ¨ä¾èµ–/ç¯å¢ƒ

- [ ] Supabase è¡¨ç»“æ„ä¸ RLS åœ¨æœåŠ¡ç«¯é…ç½®
- [ ] .env å˜é‡ (Supabase, JWT)
- [ ] åˆçº¦åœ°å€ä¸ ABI æ›´æ–°

---

## 11. éªŒæ”¶æ¸…å• (Demo Checklist)

å‚è€ƒ PRD Section 8ï¼ŒæŒ‰å½“å‰å®ç°çŠ¶æ€æ ‡æ³¨ï¼š

1. [x] é€šè¿‡é‚€è¯·ç é“¾æ¥è¿›å…¥ `/join`
2. [x] è¿æ¥é’±åŒ… â†’ ç­¾å â†’ åŠ å…¥ Dapp æˆåŠŸ â†’ è‡ªåŠ¨è¿›å…¥ `/home`
3. [x] é¦–é¡µçœ‹åˆ°ä»…è¯¥ vendor çš„äº‹ä»¶åˆ—è¡¨
4. [ ] è¿›å…¥äº‹ä»¶é¡µä¸‹å•ï¼ŒPartial æ—¶èƒ½åœ¨"æˆ‘çš„è®¢å•"çœ‹åˆ° remaining
5. [ ] ä¸æ”¯æŒæ’¤å•ï¼ŒPartial remaining ç•™åœ¨è®¢å•ç°¿å¹¶æç¤º
6. [~] Portfolio æ˜¾ç¤ºè¯¥ vendor çš„ä½™é¢/æŒä»“/æµæ°´ (ç¼ºäº¤æ˜“æµæ°´)
7. [~] åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå·²åŠ å…¥ vendorï¼šæ•°æ®å®Œå…¨åˆ‡æ¢ä¸”äº’ä¸å½±å“ (ç¼º toast æç¤º)
8. [~] Vendor ç«¯ç”Ÿæˆ/æ’¤é”€é‚€è¯·ç  (è¯·æ±‚éœ€è¡¥æˆæƒ)
9. [~] Vendor ç«¯åˆ›å»ºäº‹ä»¶ã€å–æ¶ˆäº‹ä»¶ (ç¼ºå–æ¶ˆäº‹ä»¶)
10. [ ] Vendor ç«¯æŸ¥çœ‹/æå–è´¹ç”¨æ± 
11. [~] Admin ç«¯å®¡æ ¸ Dapp ç”³è¯· (æ¥å£/æƒé™å·²åœ¨, éœ€è”è°ƒæ•°æ®)

---

## é™„å½• A: å¸¸é‡å®šä¹‰

```typescript
// lib/utils/constants.ts

// äº‹ä»¶çŠ¶æ€
export const EVENT_STATUS = {
  CREATED: 0,
  ACTIVE: 1,
  SETTLED: 2,
  CANCELLED: 3,
} as const;

// è®¢å•çŠ¶æ€
export const ORDER_STATUS = {
  PENDING: 0,
  PARTIAL: 1,
  FILLED: 2,
  CANCELLED: 3,
} as const;

// è®¢å•æ–¹å‘
export const ORDER_SIDE = {
  BUY: 0,
  SELL: 1,
} as const;

// é‚€è¯·ç çŠ¶æ€
export const INVITE_STATUS = {
  REVOKED: 0,
  ACTIVE: 1,
  EXPIRED: 2,
} as const;

// ç”³è¯·çŠ¶æ€
export const APPLICATION_STATUS = {
  PENDING: 0,
  APPROVED: 1,
  REJECTED: 2,
} as const;

// ä»·æ ¼ç²¾åº¦
export const PRICE_PRECISION = 10000;  // 10000 = 100%

// è½®è¯¢é—´éš”
export const POLLING_INTERVAL = 10000;  // 10 seconds
```

---

## é™„å½• B: ç±»å‹å®šä¹‰

```typescript
// types/vendor.ts
export interface Vendor {
  id: number;
  vendor_id: number;
  vendor_name: string;
  vendor_address: string;
  fee_recipient: string;
  is_active: boolean;
  event_pod: string;
  orderbook_pod: string;
  funding_pod: string;
  feevault_pod: string;
  created_at: string;
  updated_at: string;
}

// types/event.ts
export interface Outcome {
  index: number;
  name: string;
  description?: string;
}

export interface Event {
  id: number;
  vendor_id: number;
  event_id: number;
  title: string;
  description: string;
  deadline: string;
  settlement_time: string;
  status: number;
  creator_address: string;
  winning_outcome_index: number | null;
  outcome_count: number;
  outcomes: Outcome[];
  prize_pool: string;
  volume: string;
  created_at: string;
  updated_at: string;
  settled_at: string | null;
}

// types/order.ts
export interface Order {
  id: number;
  vendor_id: number;
  order_id: number;
  user_address: string;
  event_id: number;
  outcome_index: number;
  side: number;
  price: number;
  amount: string;
  filled_amount: string;
  remaining_amount: string;
  status: number;
  token_address: string;
  tx_hash: string;
  created_at: string;
  updated_at: string;
}

// types/user.ts
export interface UserBalance {
  id: number;
  vendor_id: number;
  user_address: string;
  token_address: string;
  available_balance: string;
  locked_balance: string;
  updated_at: string;
}

export interface Position {
  id: number;
  vendor_id: number;
  user_address: string;
  event_id: number;
  outcome_index: number;
  token_address: string;
  amount: string;
  avg_cost: string | null;
  updated_at: string;
}
```

---

**æ–‡æ¡£ç»“æŸ**
